/*! jQuery Bootstrap Slidey - v0.0.1 - 2016-01-21
* http://www.tahapaksu.com
* Copyright (c) 2016 Taha PAKSU; Licensed  */
!function(a){a.slidey=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("slidey",d),d.slides=[],d.layout={},d.activeSlideIndex=-1,d.timer=0,d.hfr=0,d.init=function(){d.options=a.extend({},a.slidey.defaultOptions,c),d.fetchSlides(),d.constructLayout(),d.showLoading(),d.hideLoading(),d.gotoSlide(2),d.startSliding()},d.fetchSlides=function(){d.$el.find("ul").size()>0&&d.$el.find("ul").first().children("li").each(function(){var b={},c=a(this);if(b.image=c.find("img").size()>0?c.find("img").first().attr("src"):-1,-1===b.image)throw"Structure error: item has no img tag.";b.title=c.find("p.title").size()>0?c.find("p.title").first().html():"",b.description=c.find("p.description").size()>0?c.find("p.description").first().html():"",d.slides.push(b)})},d.constructLayout=function(){d.$el.hide();var b="";b+=d.options.showList?"<div class='slidey-row row'><div class='slidey-image col-md-8'><div class='slidey-overlay'>":"<div class='slidey-row row'><div class='slidey-image col-md-12'><div class='slidey-overlay'>",b+="<p class='slidey-overlay-title'></p><p class='slidey-overlay-description'></p>",b+="<span class='slidey-progress'></span>",b+="</div></div><div class='slidey-list col-md-4'></div></div>",d.$el.empty().append(b),d.layout.$row=d.$el.find(".slidey-row").first(),d.layout.$image=d.$el.find(".slidey-image").first(),d.layout.$list=d.$el.find(".slidey-list").first(),d.layout.overlay={},d.layout.overlay.progressWidth=-1,d.layout.$overlay=d.$el.find(".slidey-overlay").first(),d.layout.overlay.$title=d.$el.find(".slidey-overlay-title").first(),d.layout.overlay.$description=d.$el.find(".slidey-overlay-description").first(),d.layout.overlay.$progress=d.$el.find(".slidey-progress").first();var c="<div class='slidey-controls slidey-controls-previous'><i class='fa fa-chevron-left'></i></div>";c+="<div class='slidey-controls slidey-controls-next'><i class='fa fa-chevron-right'></i></div>",d.layout.$image.append(c);var e=a("<ul></ul>");d.layout.$list.append(e);for(var f=0;f<d.slides.length;f++){var g=a("<li></li>"),h="<table class='slidey-list-table'><tr>";h+="<td rowspan='2' class='slidey-list-thumbnail-container'>",h+="<div class='slidey-list-thumbnail' style='background-image: url(\""+d.slides[f].image+"\")'>",h+="</td><td class='slidey-list-title'>"+d.slides[f].title+"</td>",h+="</tr><tr>",h+="<td class='slidey-list-description'>"+d.slides[f].description+"</td>",h+="</tr></table>",g.append(h),e.append(g)}d.options.showList===!1&&d.layout.$list.hide(),d.$el.show();var i=d.layout.$image.innerHeight(),j=parseInt(i)/d.options.listCount,k=j-9;d.layout.$list.find(".slidey-list-thumbnail").css("width",k).css("height",k),d.addEventListeners(),d.layout.$list.find("li").each(function(){var b=a(this).outerWidth()-a(this).innerWidth();a(this).height(j-b),a(".slidey-list-description",this).width(a(this).innerWidth()-a(".slidey-list-thumbnail-container",this).width()).height(a(this).height()-a(".slidey-list-title").height()).css("display","block")}),d.prepareNodes()},d.addEventListeners=function(){d.layout.$list.on("click","li",function(){d.gotoSlide(d.layout.$list.find("li").index(a(this)))}),d.layout.$image.on("click",".slidey-controls-previous",function(){d.stopTimer(),d.slidePrevious()}),d.layout.$image.on("click",".slidey-controls-next",function(){d.stopTimer(),d.slideNext()})},d.showLoading=function(){},d.hideLoading=function(){},d.startSliding=function(){d.gotoSlide(0)},d.startTimer=function(){d.timer=setTimeout(d.slideNext,d.options.interval),d.layout.overlay.$progress.stop(!0,!0).css("width","0"),d.layout.overlay.$progress.animate({width:d.layout.overlay.progressWidth+"px"},d.options.interval)},d.stopTimer=function(){clearTimeout(d.timer),d.layout.overlay.$progress.stop(),d.layout.$overlay.stop(),-1===d.layout.overlay.progressWidth&&(d.layout.overlay.progressWidth=d.layout.overlay.$progress.originalWidth())},d.slideNext=function(){d.gotoSlide(d.activeSlideIndex+1)},d.slidePrevious=function(){d.gotoSlide(d.activeSlideIndex-1)},d.gotoSlide=function(a){0>a?a=d.slides.length-1:a>=d.slides.length&&(a=0),d.activeSlideIndex=a,d.stopTimer(),d.options.showList&&d.layout.$list.find("li").eq(a).scrollToView(".slidey-list",d.options.listCount),d.layout.$overlay.fadeOut("fast",function(){d.options.showList&&(d.layout.$list.find("li").removeClass("slidey-active"),d.layout.$list.find("li").eq(a).addClass("slidey-active")),d.layout.$image.css("background-image","url("+d.slides[a].image+")"),d.layout.overlay.$title.empty().append(d.slides[a].title),d.layout.overlay.$description.empty().append(d.slides[a].description),d.layout.$overlay.fadeIn("fast"),d.selectNode(a),d.startTimer()})},d.prepareNodes=function(){if(d.options.showNodes&&""!==d.options.nodeContainer&&a(d.options.nodeContainer).size()>0){d.layout.$nodeContainer=a(d.options.nodeContainer);for(var b=a("<div class='slidey-node-container'></ul>"),c=0;c<d.slides.length;c++){var e="<div class='slidey-node' style='background-image: url(\""+d.slides[c].image+"\");'></div>";b.append(e)}d.layout.$nodeContainer.empty().append(b),a(".slidey-node",d.layout.$nodeContainer).on("click",function(){d.gotoSlide(d.layout.$nodeContainer.find(".slidey-node").index(a(this)))})}},d.selectNode=function(b){if(d.options.showNodes&&""!==d.options.nodeContainer&&a(d.options.nodeContainer).size()>0){var c=d.layout.$nodeContainer.find(".slidey-node");c.removeClass("active"),c.eq(b).addClass("active")}},d.init()},a.slidey.defaultOptions={interval:3e3,listCount:5,showList:!0,showNodes:!1,nodeContainer:""},a.fn.slidey=function(b){return this.each(function(){new a.slidey(this,b)})},a.fn.scrollToView=function(b,c){var d=a(this),e=d.parents(b).first(),f=d.parent().find("li").index(d.get(0));if(e)if(f>=c){var g=d.parent().find("li").eq(f-c);e.stop().animate({scrollTop:g.position().top+g.originalHeight()+2},"300","swing")}else e.stop().animate({scrollTop:0},"300","swing")},a.fn.originalWidth=function(){var b=a(this)[0];return"undefined"!=typeof b?b.getBoundingClientRect().width:null},a.fn.originalHeight=function(){var b=a(this)[0];return"undefined"!=typeof b?b.getBoundingClientRect().height:null}}(jQuery);